syntax = "proto3";
import "common/common.proto";
option go_package = "github.com/OpenIMSDK/chat/pkg/proto/organization";
package OpenIMChat.organization;


message CreateDepartmentReq{
  OpenIMChat.common.Department departmentInfo = 1;
}

message CreateDepartmentResp{
  OpenIMChat.common.Department departmentInfo = 1;
}

message UpdateDepartmentReq{
  OpenIMChat.common.Department departmentInfo = 1;
}

message UpdateDepartmentResp{
}


message GetOrganizationDepartmentReq{
}

message DepartmentInfo {
  OpenIMChat.common.Department department = 1;
  repeated DepartmentInfo subDepartmentList = 2;
}


message GetOrganizationDepartmentResp{
  repeated DepartmentInfo departmentList = 1;
}

message DeleteDepartmentReq{
  repeated string departmentIDList = 1;
}

message DeleteDepartmentResp{
}

message GetDepartmentParentIDListReq {
  string departmentID = 1;
}

message GetDepartmentParentIDListResp {
  repeated string parentIDList = 1;
}


message CreateOrganizationUserReq{
  OpenIMChat.common.OrganizationUser organizationUser = 1;
}


message CreateOrganizationUserResp{
}


message UpdateOrganizationUserReq{
  OpenIMChat.common.OrganizationUser organizationUser = 1;
}


message UpdateOrganizationUserResp{
}




message CreateDepartmentMemberReq{
  OpenIMChat.common.DepartmentMember departmentMember = 1;
}
message CreateDepartmentMemberResp{
}


message GetUserInDepartmentReq{
  string userID = 1;
}
message GetUserInDepartmentResp{
  OpenIMChat.common.UserInDepartment userInDepartment = 1;
}


message UpdateUserInDepartmentReq{
  OpenIMChat.common.DepartmentMember departmentMember = 1;
}
message UpdateUserInDepartmentResp{
}


message DeleteUserInDepartmentReq{
  string userID = 1;
  string departmentID = 2;
}
message DeleteUserInDepartmentResp{
}

message DeleteOrganizationUserReq{
  string userID = 1;
}
message DeleteOrganizationUserResp{
}


//message GetDepartmentMemberReq{
//  string operationID = 1;
//  string opUserID = 2;
//  string departmentID = 3;
//}
//
//message GetDepartmentMemberResp{
//  common.CommonResp commonResp = 1;
//  repeated  common.UserDepartmentMember userDepartmentMemberList = 3;
//}

message GetDepartmentRelatedGroupIDListReq {
  repeated string departmentIDList = 1;
}

message GetDepartmentRelatedGroupIDListResp {
  repeated string groupIDList = 1;
}

message GetUserInOrganizationReq{
  repeated string userIDList = 1;
}

message GetUserInOrganizationResp{
  repeated OpenIMChat.common.OrganizationUser organizationUsers = 1;
}

// ####################################

message GetCompleteOrganizationReq {
}

message CompleteOrganization {
  uint32 peopleNumber = 1;
  repeated CompleteOrganization list = 2;
  string departmentID = 3;
  string faceURL = 4;
  string name = 5;
  string parentID = 6;
  int32 order = 7;
  int32 departmentType = 8;
  uint32 createTime = 9;
  string ex = 10;
}

message GetCompleteOrganizationResp {
  repeated CompleteOrganization list = 1;
}



message GetUsersInDepartmentReq{
  repeated string userIDList = 1;
}

message GetUsersInDepartmentResp{
  repeated OpenIMChat.common.UserInDepartment list = 1;
}




message GetSearchUserListReq {
  uint32 pageNumber = 1;
  uint32 showNumber = 2;
  string text = 3;
  repeated GetSearchUserListSort sorts = 4;
  repeated string departmentIDList = 5;
  repeated string positionList = 6;

}

message GetSearchUserListSort {
  string field = 1;
  string rule = 2;
}


message GetSearchUserListResp {
  repeated OpenIMChat.common.UserInDepartment userList = 1;
  uint32 Total = 2;
}


message SetOrganizationReq {
  OpenIMChat.common.Organization organization = 1;
}

message SetOrganizationResp {
}

message GetOrganizationReq {
}

message GetOrganizationResp {
  OpenIMChat.common.Organization organization = 1;
}



message GetSubDepartmentReq {
  string  departmentID = 1;
}

message GetSubDepartmentResp {
  repeated OpenIMChat.common.DepartmentMember departmentMemberList = 1;
  repeated OpenIMChat.common.Department departmentList = 2;
  repeated OpenIMChat.common.Department departmentDirectoryList = 3;
}


message GetSearchDepartmentUserReq {
  string keyword = 1;
  bool IsGetAllDepartment = 2;
}


message GetSearchDepartmentUserOrganizationUser{
  OpenIMChat.common.OrganizationUser organizationUser = 1;
  repeated OpenIMChat.common.Department departmentList = 2;
  string position = 3;
}

message GetSearchDepartmentUserResp {
  repeated OpenIMChat.common.Department departmentList = 1;
  repeated GetSearchDepartmentUserOrganizationUser organizationUserList = 2;
}

message SortDepartmentListReq {
  string departmentID = 1;
  string parentID = 2;
  string nextDepartmentID = 3;
}

message SortDepartmentListResp {
}

message SortOrganizationUserListReq {
  string departmentID = 1;
  string userID = 2;
  string nextUserID = 3;
}

message SortOrganizationUserListResp {
}


message GetDepartmentReq {
  string departmentID = 1;
}

message GetDepartmentResp {
  OpenIMChat.common.Department department = 1;
}


message CreateNewOrganizationMemberReq {
  OpenIMChat.common.OrganizationUser organizationUser = 1;
  repeated OpenIMChat.common.DepartmentMember departmentMemberList = 2;
  OpenIMChat.common.UserIdentity userIdentity = 3;
}

message CreateNewOrganizationMemberResp {
}


message GetUserInfoReq {
  string userID = 1;
}

message GetUserInfoResp {
  OpenIMChat.common.OrganizationUser user = 1;
}

message BatchImportUserDepartmentName {
  repeated string  hierarchyName = 1;
}

message BatchImportUserDepartmentNamePosition {
  repeated string  hierarchyName = 1;
  string position = 2;
}

message BatchImportUser {
  string userID = 1;
  string  nickname = 2;
  string   englishName = 3;
  string  faceURL = 4;
  int32   gender = 5;
  string   mobile = 6;
  string telephone = 7;
  int64 birth = 8;
  string  email = 9;
  string account = 10;
  string password = 11;
  repeated BatchImportUserDepartmentNamePosition userDepartmentNameList = 12;
  int32 order = 13;
  int32 status = 14;
  string  areaCode = 15;
  string  station = 16;
}

message BatchImportDepartment {
  string departmentID = 1;
  string faceURL = 2;
  string name = 3;
  string parentID = 4;
  int32 order = 5;
  int32 departmentType = 6;
  string  relatedGroupID = 7;
  BatchImportUserDepartmentName parentDepartmentName = 11;
}


message BatchImportReq {
  repeated BatchImportUser userList = 1;
  repeated BatchImportDepartment departmentList = 2;
  //  repeated common.DepartmentMember departmentMemberList = 5;
  //  repeated common.Organization organizationList = 6;
  //  string defaultPassword = 7;
}

message BatchImportResp {
}

//message BatchExportReq {
//  string operationID = 1;
//  string opUserID = 2;
//}
//
//message BatchExportResp {
//  common.CommonResp commonResp = 1;
//  repeated common.OrganizationUser organizationUserList = 2;
//  repeated common.Department departmentList = 3;
//  repeated common.DepartmentMember departmentMemberList = 4;
//  repeated common.Organization organizationList = 5;
//}

message MoveUserDepartment {
  string userID = 1;
  string departmentID = 2;
  string  currentDepartmentID = 3;
  string position = 4;
  int32 leader = 5;
  int32 status = 6;
  int64 entryTime = 7;
  int64 terminationTime = 8;
  int32  order = 9;
}

message MoveUserDepartmentReq {
  repeated MoveUserDepartment moveUserDepartmentList = 1;
}

message MoveUserDepartmentResp {
}

message GetUserFullListReq {
  int32 pageNumber = 1;
  int32 showNumber = 2;
  repeated string  userIDList = 3;
}

message GetUserFullListResp {
  repeated OpenIMChat.common.OrganizationUser organizationUserList = 1;
  int32 total = 2;
}

message SearchUsersFullInfoReq{
  OpenIMChat.common.Operation operation = 1;
  OpenIMChat.common.RequestPagination pagination = 2;
  OpenIMChat.common.UserPublicInfo userPublicInfo = 3;
  string content = 4;
}


message SearchUsersFullInfoResp{
  repeated OpenIMChat.common.OrganizationUser organizationUserList = 1;
  int32 total = 2;
}


service organization{
  rpc CreateDepartment(CreateDepartmentReq) returns(CreateDepartmentResp);
  rpc UpdateDepartment(UpdateDepartmentReq) returns(UpdateDepartmentResp);
  rpc GetOrganizationDepartment(GetOrganizationDepartmentReq) returns(GetOrganizationDepartmentResp);
  rpc DeleteDepartment(DeleteDepartmentReq) returns(DeleteDepartmentResp);
  rpc GetDepartment(GetDepartmentReq) returns(GetDepartmentResp);

  rpc CreateOrganizationUser(CreateOrganizationUserReq) returns(CreateOrganizationUserResp);
  rpc UpdateOrganizationUser(UpdateOrganizationUserReq) returns(UpdateOrganizationUserResp);
  rpc DeleteOrganizationUser(DeleteOrganizationUserReq) returns(DeleteOrganizationUserResp);


  rpc CreateDepartmentMember(CreateDepartmentMemberReq) returns(CreateDepartmentMemberResp);
  rpc GetUserInDepartment(GetUserInDepartmentReq) returns(GetUserInDepartmentResp);
  rpc DeleteUserInDepartment(DeleteUserInDepartmentReq) returns(DeleteUserInDepartmentResp);
  rpc UpdateUserInDepartment(UpdateUserInDepartmentReq) returns(UpdateUserInDepartmentResp);

  rpc GetSearchUserList(GetSearchUserListReq) returns(GetSearchUserListResp);

  rpc SetOrganization(SetOrganizationReq) returns(SetOrganizationResp);
  rpc GetOrganization(GetOrganizationReq) returns(GetOrganizationResp);


  rpc GetSubDepartment(GetSubDepartmentReq)returns(GetSubDepartmentResp);

  rpc GetSearchDepartmentUser(GetSearchDepartmentUserReq)returns(GetSearchDepartmentUserResp);


  rpc SortDepartmentList(SortDepartmentListReq)returns(SortDepartmentListResp);
  rpc SortOrganizationUserList(SortOrganizationUserListReq)returns(SortOrganizationUserListResp);

  rpc CreateNewOrganizationMember(CreateNewOrganizationMemberReq) returns(CreateNewOrganizationMemberResp);

  rpc GetUserInfo(GetUserInfoReq)returns(GetUserInfoResp);


  rpc BatchImport(BatchImportReq)returns(BatchImportResp);
  //  rpc BatchExport(BatchExportReq)returns(BatchExportResp);


  rpc MoveUserDepartment(MoveUserDepartmentReq)returns(MoveUserDepartmentResp);

  rpc GetUserFullList(GetUserFullListReq)returns(GetUserFullListResp);
  rpc SearchUsersFullInfo(SearchUsersFullInfoReq)returns(SearchUsersFullInfoResp);

}



